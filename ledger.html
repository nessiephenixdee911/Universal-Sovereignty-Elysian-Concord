<!DOCTYPE html>
<html>
<head>
  <title>Voting Ledger</title>
  <style>
    body { 
      background: url('https://i.ibb.co/gZ8mvQNW/8-A5-D39-BC-6070-47-C3-977-F-BC08530456-A0.png') top center / contain no-repeat fixed;
      color: #e8f5e8; font-family: monospace; padding: 2rem; margin: 0; min-height: 100vh; 
      text-shadow: 1px 1px 3px #000; box-sizing: border-box;
    }
    .box { background: rgba(0,100,0,0.6); padding: 1.5rem; margin: 2rem auto; max-width: 850px; border-radius: 15px; }
    h1 { font-size: 2.8rem; color: #98fb98; text-shadow: 0 0 20px #228b22; text-align: center; }
    p { margin: 0.6rem 0; font-size: 1.2rem; }
    .vote-yes { color: #90ee90; }
    .vote-no { color: #ff6347; }
  </style>
</head>
<body>

  <h1>VOTE LEDGER</h1>
  <div class="box">
    <a href="index.html" style="color:#90ee90;">← Vote</a>
    <hr style="border-color:rgba(144,238,144,0.3);">
    <div id="list"></div>
  </div>

  <script>
    const key = "sb_publishable_wKVt9PjkIrXGJPUezL57oQ_RM7V8Yl4";
    fetch("https://auqzjncsxxleillfnpyh.supabase.co/rest/v1/votes?select=*")
      .then(r => r.json())
      .then(votes => {
        document.getElementById("list").innerHTML = votes.map(v => `
          <p>${v.name} – ${v.city}, ${v.province}, ${v.country} 
             <span class="vote-${v.choice === 'Sovereignty' ? 'yes' : 'no'}">${v.choice}</span></p>`
        ).join("");
        if (!votes.length) document.getElementById("list").innerHTML = "<p>No votes yet.</p>";
      });
  </script>
</body>
</html>